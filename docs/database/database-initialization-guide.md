# è³‡æ–™åº«åˆå§‹åŒ–ç³»çµ±

## ğŸ¯ **æ¦‚è¿°**

æˆ‘å€‘ç‚ºå°ˆæ¡ˆå»ºç«‹äº†ä¸€å€‹å®Œæ•´çš„ SQLite è³‡æ–™åº«åˆå§‹åŒ–ç³»çµ±ï¼Œè®“æ–°çš„é–‹ç™¼è€…æˆ–åœ˜éšŠæˆå“¡å¯ä»¥å¿«é€Ÿè¨­ç½®æœ¬åœ°é–‹ç™¼ç’°å¢ƒã€‚

## ğŸš€ **å¿«é€Ÿé–‹å§‹**

### é¦–æ¬¡è¨­ç½®ï¼ˆæ¨è–¦ï¼‰
```bash
npm run db:init -- --reset --seed
```
é€™æœƒï¼š
- åˆªé™¤ç¾æœ‰è³‡æ–™åº«ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
- å»ºç«‹å…¨æ–°çš„è³‡æ–™åº«çµæ§‹
- å¡«å…¥æ¸¬è©¦è³‡æ–™
- é©—è­‰é€£æ¥

### å…¶ä»–å¸¸ç”¨å‘½ä»¤
```bash
# åªåˆå§‹åŒ–è³‡æ–™åº«çµæ§‹
npm run db:init

# åªå¡«å…¥ç¨®å­è³‡æ–™
npm run db:seed

# å¿«é€Ÿé‡ç½®ï¼ˆé‡æ–°åˆå§‹åŒ–+ç¨®å­è³‡æ–™ï¼‰
npm run db:reset

# é–‹å•Ÿ Prisma Studio æŸ¥çœ‹è³‡æ–™
npm run db:studio:sqlite
```

## ğŸ“‹ **å¯ç”¨çš„ NPM è…³æœ¬**

| å‘½ä»¤ | åŠŸèƒ½ | é©ç”¨å ´æ™¯ |
|------|------|----------|
| `npm run db:init` | åˆå§‹åŒ–è³‡æ–™åº«çµæ§‹ | é¦–æ¬¡è¨­ç½®æˆ–çµæ§‹æ›´æ–° |
| `npm run db:init -- --reset` | é‡æ–°åˆå§‹åŒ–ï¼ˆåˆªé™¤ç¾æœ‰è³‡æ–™ï¼‰ | éœ€è¦å®Œå…¨é‡æ–°é–‹å§‹ |
| `npm run db:init -- --seed` | åˆå§‹åŒ–ä¸¦å¡«å…¥ç¨®å­è³‡æ–™ | é¦–æ¬¡è¨­ç½®ä¸¦éœ€è¦æ¸¬è©¦è³‡æ–™ |
| `npm run db:init -- --reset --seed` | å®Œå…¨é‡æ–°åˆå§‹åŒ–+ç¨®å­è³‡æ–™ | æœ€å¸¸ç”¨çš„é‡ç½®å‘½ä»¤ |
| `npm run db:seed` | åƒ…å¡«å…¥ç¨®å­è³‡æ–™ | è³‡æ–™åº«å·²å­˜åœ¨ï¼Œåªéœ€è¦æ¸¬è©¦è³‡æ–™ |
| `npm run db:reset` | å¿«é€Ÿé‡ç½®ï¼ˆç­‰åŒæ–¼ä¸Šé¢çš„ reset+seedï¼‰ | æ—¥å¸¸é–‹ç™¼é‡ç½® |
| `npm run db:studio:sqlite` | é–‹å•Ÿ Prisma Studioï¼ˆSQLiteï¼‰ | æŸ¥çœ‹å’Œç·¨è¼¯è³‡æ–™ |
| `npm run db:studio:postgres` | é–‹å•Ÿ Prisma Studioï¼ˆPostgreSQLï¼‰ | ç”Ÿç”¢ç’°å¢ƒè³‡æ–™æŸ¥çœ‹ |

## ğŸ—‚ï¸ **æª”æ¡ˆçµæ§‹**

```
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ init-sqlite-db.js     # ä¸»è¦åˆå§‹åŒ–è…³æœ¬
â”‚   â””â”€â”€ README.md            # è…³æœ¬èªªæ˜æ–‡ä»¶
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ dev.db              # SQLite è³‡æ–™åº«æª”æ¡ˆ
â”‚   â””â”€â”€ README.md           # è³‡æ–™ç›®éŒ„èªªæ˜
â”œâ”€â”€ seed-database.js        # èˆŠç‰ˆç¨®å­è³‡æ–™è…³æœ¬ï¼ˆå¯ä¿ç•™ä½œç‚ºåƒè€ƒï¼‰
â””â”€â”€ test-db-connection.js   # è³‡æ–™åº«é€£æ¥æ¸¬è©¦è…³æœ¬
```

## ğŸŒ± **ç¨®å­è³‡æ–™å…§å®¹**

åˆå§‹åŒ–è…³æœ¬æœƒå»ºç«‹ä»¥ä¸‹æ¸¬è©¦è³‡æ–™ï¼š

### ğŸ‘¥ **ä½¿ç”¨è€… (2å€‹)**
- **å¼µå°æ˜** (`user-001`)
  - Username: `ming123`
  - Email: `ming@example.com`
  - Role: `USER`
  
- **æå°è¯** (`user-002`)
  - Username: `admin_hua`
  - Email: `hua@example.com`
  - Role: `ADMIN`

### ğŸª **å•†åº— (2å€‹)**
- **ç¾å‘³ä¾¿ç•¶åº—** (`shop-001`)
  - åœ°å€: å°åŒ—å¸‚ä¿¡ç¾©å€æ¾ä»è·¯123è™Ÿ
  - é›»è©±: 02-1234-5678
  
- **ç´ é£Ÿé¤å»³** (`shop-002`)
  - åœ°å€: å°åŒ—å¸‚å¤§å®‰å€æ•¦åŒ–å—è·¯456è™Ÿ
  - é›»è©±: 02-8765-4321

### ğŸ½ï¸ **åˆé¤æ´»å‹• (3å€‹)**
- **ä»Šæ—¥åœ˜é«”è¨‚é¤** - ä»Šå¤©çš„æ´»å‹•
- **æ˜æ—¥ç´ é£Ÿå°ˆå ´** - æ˜å¤©çš„ç´ é£Ÿæ´»å‹•
- **ä¸‹é€±ç‰¹åˆ¥æ´»å‹•** - ä¸‹é€±çš„æˆ¶å¤–æ´»å‹•

## ğŸ”§ **é€²éšä½¿ç”¨**

### åƒæ•¸èªªæ˜
```bash
# é¡¯ç¤ºèªªæ˜
npm run db:init -- --help

# é‡æ–°åˆå§‹åŒ–ï¼ˆæœƒåˆªé™¤ç¾æœ‰è³‡æ–™ï¼‰
npm run db:init -- --reset

# åˆå§‹åŒ–å¾Œå¡«å…¥ç¨®å­è³‡æ–™
npm run db:init -- --seed

# çµ„åˆä½¿ç”¨åƒæ•¸
npm run db:init -- --reset --seed
npm run db:init -- -rs  # çŸ­åƒæ•¸å½¢å¼
```

### ç’°å¢ƒæª¢æŸ¥
- è…³æœ¬åªåœ¨é–‹ç™¼ç’°å¢ƒåŸ·è¡Œï¼ˆ`NODE_ENV !== 'production'`ï¼‰
- å¦‚éœ€åœ¨å…¶ä»–ç’°å¢ƒåŸ·è¡Œï¼Œä½¿ç”¨ `--force` åƒæ•¸

### æ•…éšœæ’é™¤
```bash
# å¦‚æœé‡åˆ°æ¬Šé™å•é¡Œ
chmod 755 data/  # Linux/macOS
icacls data /grant Everyone:F  # Windows

# å¦‚æœ Prisma Client æœ‰å•é¡Œ
npm run generate

# å¦‚æœè³‡æ–™åº«æª”æ¡ˆæå£
npm run db:reset
```

## ğŸ”„ **é–‹ç™¼å·¥ä½œæµç¨‹**

### æ—¥å¸¸é–‹ç™¼
1. **æ­£å¸¸é–‹ç™¼**ï¼šä½¿ç”¨ç¾æœ‰è³‡æ–™åº«
2. **éœ€è¦é‡ç½®è³‡æ–™**ï¼š`npm run db:seed`
3. **çµæ§‹æœ‰è®Šæ›´**ï¼š`npm run db:init`
4. **å®Œå…¨é‡æ–°é–‹å§‹**ï¼š`npm run db:reset`

### åœ˜éšŠå”ä½œ
1. **æ–°æˆå“¡åŠ å…¥**ï¼š`npm run db:init -- --seed`
2. **Schema æ›´æ–°å¾Œ**ï¼š`npm run db:init -- --reset --seed`
3. **åˆ†äº«æ¸¬è©¦å ´æ™¯**ï¼šæ›´æ–° `scripts/init-sqlite-db.js` ä¸­çš„ç¨®å­è³‡æ–™

### Git å·¥ä½œæµç¨‹
1. **Pull æœ€æ–°ç¨‹å¼ç¢¼**
2. **æª¢æŸ¥æ˜¯å¦æœ‰ Schema è®Šæ›´**
3. **å¦‚æœ‰è®Šæ›´ï¼ŒåŸ·è¡Œ**ï¼š`npm run db:reset`
4. **ç¹¼çºŒé–‹ç™¼**

## âš ï¸ **æ³¨æ„äº‹é …**

### è³‡æ–™æŒä¹…æ€§
- é–‹ç™¼è³‡æ–™ä¸æœƒä¿å­˜åœ¨ Git ä¸­
- é‡è¦çš„æ¸¬è©¦å ´æ™¯è«‹åŠ å…¥ç¨®å­è³‡æ–™è…³æœ¬
- ç”Ÿç”¢è³‡æ–™ä½¿ç”¨ä¸åŒçš„å‚™ä»½ç­–ç•¥

### å®‰å…¨æ€§
- ç¨®å­è³‡æ–™ä½¿ç”¨å‡è³‡æ–™ï¼Œä¸åŒ…å«çœŸå¯¦å¯†ç¢¼
- ä¸è¦åœ¨ç¨®å­è³‡æ–™ä¸­åŒ…å«æ•æ„Ÿè³‡è¨Š
- ç”Ÿç”¢ç’°å¢ƒæœ‰ç¨ç«‹çš„è³‡æ–™åº«å’Œå‚™ä»½

### æ•ˆèƒ½
- SQLite é©åˆæœ¬åœ°é–‹ç™¼
- ç”Ÿç”¢ç’°å¢ƒä½¿ç”¨ PostgreSQL
- ç¨®å­è³‡æ–™é‡é©ä¸­ï¼Œé¿å…å½±éŸ¿é–‹ç™¼é«”é©—

## ğŸ“š **ç›¸é—œæ–‡ä»¶**

- [Prisma æ–‡ä»¶](https://www.prisma.io/docs)
- [SQLite æ–‡ä»¶](https://sqlite.org/docs.html)
- [è³‡æ–™åº«è¨—ç®¡æ–¹æ¡ˆè©•ä¼°](./documents/database-hosting-evaluation.md)

## ğŸ‰ **æˆåŠŸæŒ‡æ¨™**

ç•¶ä½ çœ‹åˆ°ä»¥ä¸‹è¼¸å‡ºæ™‚ï¼Œè¡¨ç¤ºåˆå§‹åŒ–æˆåŠŸï¼š

```
ğŸ‰ SQLite è³‡æ–™åº«åˆå§‹åŒ–å®Œæˆï¼
ğŸ“‚ è³‡æ–™åº«ä½ç½®: C:\Users\...\data\dev.db
ğŸš€ ç¾åœ¨ä½ å¯ä»¥é–‹å§‹é–‹ç™¼äº†ï¼

âœ¨ è³‡æ–™åº«å·²æº–å‚™å°±ç·’ï¼Œé–‹å§‹ä½ çš„é–‹ç™¼ä¹‹æ—…å§ï¼
```

æ­¤æ™‚ä½ å¯ä»¥ï¼š
- å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼š`npm run dev`
- æŸ¥çœ‹è³‡æ–™ï¼š`npm run db:studio:sqlite`
- æ¸¬è©¦ APIï¼šè¨ªå• `http://localhost:3000/api/lunch/events`